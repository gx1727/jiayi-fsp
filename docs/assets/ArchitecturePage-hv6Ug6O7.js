import{c as r,j as t,m as s}from"./index-h-KJLfNh.js";import{aG as n}from"./Mermaid-DNShWi5D.js";import{S as a}from"./server-LqIAabh_.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],i=r("target",c);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],p=r("triangle-alert",o);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],l=r("wifi-off",C),d=()=>t.jsxs("div",{"trae-inspector-start-line":"38","trae-inspector-start-column":"4","trae-inspector-end-line":"57","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100",children:[t.jsx("h2",{"trae-inspector-start-line":"39","trae-inspector-start-column":"6","trae-inspector-end-line":"39","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%8D%8F%E8%AE%AE%E5%88%86%E5%B1%82%E6%80%BB%E8%A7%88%22%2C%22textStartLine%22%3A%2239%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2239%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"协议分层总览"}),t.jsx("div",{"trae-inspector-start-line":"40","trae-inspector-start-column":"6","trae-inspector-end-line":"42","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"flex justify-center",children:t.jsx(n,{chart:`
flowchart TB
    subgraph App["应用层 (家忆)"]
        Scanner["文件扫描 / 去重 / 目录策略"]
    end

    subgraph Control["控制层 (MQTT)"]
        Session["会话 / 状态 / 调度 / ACK"]
    end

    subgraph Data["传输层 (UDP + TCP)"]
        direction TB
        Chunk["UDP Chunk 流 (Primary)"]
        Fallback["TCP Stream (Fallback)"]
    end

    subgraph Network["网络层 (LAN)"]
        Conn["Wi-Fi / Ethernet"]
    end

    Scanner --> Session
    Session --> Chunk
    Session --> Fallback
    Chunk --> Conn
    Fallback --> Conn

    style App fill:#dbeafe,stroke:#2563eb,stroke-width:2px
    style Control fill:#ede9fe,stroke:#7c3aed,stroke-width:2px
    style Data fill:#fce7f3,stroke:#db2777,stroke-width:2px
    style Network fill:#f3f4f6,stroke:#4b5563,stroke-width:2px
  `})}),t.jsxs("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"6","trae-inspector-end-line":"56","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 text-left",children:[t.jsxs("div",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"47","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-primary-50 p-4 rounded-lg",children:[t.jsx("h3",{"trae-inspector-start-line":"45","trae-inspector-start-column":"12","trae-inspector-end-line":"45","trae-inspector-end-column":"69","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22MQTT%20%3D%20%E5%A4%A7%E8%84%91%22%2C%22textStartLine%22%3A%2245%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%2245%22%2C%22textEndColumn%22%3A%2264%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-primary-700",children:"MQTT = 大脑"}),t.jsx("p",{"trae-inspector-start-line":"46","trae-inspector-start-column":"12","trae-inspector-end-line":"46","trae-inspector-end-column":"96","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%B4%9F%E8%B4%A3%E6%8C%87%E6%8C%A5%E3%80%81%E8%AE%B0%E8%B4%A6%E3%80%81%E7%BA%A0%E9%94%99%E3%80%82%E9%80%9A%E8%BF%87%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84%E5%8F%91%E5%B8%83%2F%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F%EF%BC%8C%E7%BB%B4%E6%8A%A4%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E4%B8%80%E8%87%B4%E6%80%A7%E3%80%82%22%2C%22textStartLine%22%3A%2246%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%2246%22%2C%22textEndColumn%22%3A%2292%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-sm text-primary-600 mt-1",children:"负责指挥、记账、纠错。通过轻量级的发布/订阅模式，维护全局状态一致性。"})]}),t.jsxs("div",{"trae-inspector-start-line":"48","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-pink-50 p-4 rounded-lg",children:[t.jsx("h3",{"trae-inspector-start-line":"49","trae-inspector-start-column":"12","trae-inspector-end-line":"49","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22UDP%20%3D%20%E8%82%8C%E8%82%89%22%2C%22textStartLine%22%3A%2249%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%2249%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-pink-700",children:"UDP = 肌肉"}),t.jsx("p",{"trae-inspector-start-line":"50","trae-inspector-start-column":"12","trae-inspector-end-line":"50","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%8F%AA%E8%B4%9F%E8%B4%A3%E6%8A%8A%E6%95%B0%E6%8D%AE%E7%94%A9%E5%87%BA%E5%8E%BB%E3%80%82%E5%88%A9%E7%94%A8%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%89%B9%E6%80%A7%EF%BC%8C%E6%9C%80%E5%A4%A7%E5%8C%96%E5%88%A9%E7%94%A8%E5%B8%A6%E5%AE%BD%EF%BC%8C%E4%B8%8D%E8%BF%9B%E8%A1%8C%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E3%80%82%22%2C%22textStartLine%22%3A%2250%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2250%22%2C%22textEndColumn%22%3A%2288%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-sm text-pink-600 mt-1",children:"只负责把数据甩出去。利用无连接特性，最大化利用带宽，不进行拥塞控制。"})]}),t.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"8","trae-inspector-end-line":"55","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-purple-50 p-4 rounded-lg",children:[t.jsx("h3",{"trae-inspector-start-line":"53","trae-inspector-start-column":"12","trae-inspector-end-line":"53","trae-inspector-end-column":"67","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22TCP%20%3D%20%E4%BF%9D%E9%99%A9%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2253%22%2C%22textEndColumn%22%3A%2262%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-purple-700",children:"TCP = 保险"}),t.jsx("p",{"trae-inspector-start-line":"54","trae-inspector-start-column":"12","trae-inspector-end-line":"54","trae-inspector-end-column":"97","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\ArchitectureDiagram.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%BD%93%20UDP%20%E5%BD%BB%E5%BA%95%E4%B8%8D%E5%8F%AF%E7%94%A8%E6%97%B6%E8%87%AA%E5%8A%A8%E9%99%8D%E7%BA%A7%EF%BC%8C%E4%BF%9D%E8%AF%81%E2%80%9C%E6%85%A2%E4%B8%80%E7%82%B9%E4%BD%86%E8%83%BD%E4%BC%A0%E5%AE%8C%E2%80%9D%EF%BC%8C%E4%B8%8D%E8%BF%BD%E6%B1%82%E6%9E%81%E8%87%B4%E6%80%A7%E8%83%BD%E3%80%82%22%2C%22textStartLine%22%3A%2254%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%2254%22%2C%22textEndColumn%22%3A%2293%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-sm text-purple-600 mt-1",children:"当 UDP 彻底不可用时自动降级，保证“慢一点但能传完”，不追求极致性能。"})]})]})]}),A=()=>t.jsxs("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"4","trae-inspector-end-line":"47","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-100 mt-12",children:[t.jsx("h2",{"trae-inspector-start-line":"30","trae-inspector-start-column":"6","trae-inspector-end-line":"30","trae-inspector-end-column":"74","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%BC%9A%E8%AF%9D%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%8A%B6%E6%80%81%E6%9C%BA%22%2C%22textStartLine%22%3A%2230%22%2C%22textStartColumn%22%3A%2260%22%2C%22textEndLine%22%3A%2230%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-2xl font-bold text-gray-900 mb-6",children:"会话生命周期状态机"}),t.jsx("div",{"trae-inspector-start-line":"31","trae-inspector-start-column":"6","trae-inspector-end-line":"33","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"flex justify-center",children:t.jsx(n,{chart:`
stateDiagram-v2
    [*] --> INIT
    INIT --> NEGOTIATING: upload_start
    NEGOTIATING --> TRANSFERRING: upload_accept

    TRANSFERRING --> COMPLETED: upload_complete
    TRANSFERRING --> ABORTED: session_abort

    TRANSFERRING --> VERIFY: optional
    VERIFY --> COMMIT: hash OK
    VERIFY --> TRANSFERRING: verify_fail
    COMMIT --> COMPLETED: commit_done

    COMPLETED --> [*]
    ABORTED --> [*]

    note right of TRANSFERRING
        UDP 数据面在此阶段传输
        状态推进仅由 MQTT 控制面触发
    end note
  `})}),t.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"6","trae-inspector-end-line":"42","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"mt-6 text-gray-600 space-y-2",children:[t.jsxs("p",{"trae-inspector-start-line":"35","trae-inspector-start-column":"8","trae-inspector-end-line":"35","trae-inspector-end-column":"92","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"35","trae-inspector-start-column":"11","trae-inspector-end-line":"35","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22INIT%3A%22%2C%22textStartLine%22%3A%2235%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2235%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"INIT:"})," 会话初始化，等待 upload_start。"]}),t.jsxs("p",{"trae-inspector-start-line":"36","trae-inspector-start-column":"8","trae-inspector-end-line":"36","trae-inspector-end-column":"123","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"36","trae-inspector-start-column":"11","trae-inspector-end-line":"36","trae-inspector-end-column":"72","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22NEGOTIATING%3A%22%2C%22textStartLine%22%3A%2236%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2236%22%2C%22textEndColumn%22%3A%2265%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"NEGOTIATING:"})," 参数协商（chunk_size、window等），由 upload_accept 进入传输。"]}),t.jsxs("p",{"trae-inspector-start-line":"37","trae-inspector-start-column":"8","trae-inspector-end-line":"37","trae-inspector-end-column":"106","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"37","trae-inspector-start-column":"11","trae-inspector-end-line":"37","trae-inspector-end-column":"73","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22TRANSFERRING%3A%22%2C%22textStartLine%22%3A%2237%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2237%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"TRANSFERRING:"})," UDP 数据传输阶段，缺失统计与重传由 MQTT 触发。"]}),t.jsxs("p",{"trae-inspector-start-line":"38","trae-inspector-start-column":"8","trae-inspector-end-line":"38","trae-inspector-end-column":"96","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"38","trae-inspector-start-column":"11","trae-inspector-end-line":"38","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22VERIFY%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%3A%22%2C%22textStartLine%22%3A%2238%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2238%22%2C%22textEndColumn%22%3A%2264%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"VERIFY（可选）:"})," 传输完成后的完整性校验（内容哈希比对）。"]}),t.jsxs("p",{"trae-inspector-start-line":"39","trae-inspector-start-column":"8","trae-inspector-end-line":"39","trae-inspector-end-column":"94","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"39","trae-inspector-start-column":"11","trae-inspector-end-line":"39","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22COMMIT%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%3A%22%2C%22textStartLine%22%3A%2239%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2239%22%2C%22textEndColumn%22%3A%2264%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"COMMIT（可选）:"})," 校验通过，原子重命名临时文件并提交。"]}),t.jsxs("p",{"trae-inspector-start-line":"40","trae-inspector-start-column":"8","trae-inspector-end-line":"40","trae-inspector-end-column":"101","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"40","trae-inspector-start-column":"11","trae-inspector-end-line":"40","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22COMPLETED%3A%22%2C%22textStartLine%22%3A%2240%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2240%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"COMPLETED:"})," 会话完成，由 upload_complete 触发。"]}),t.jsxs("p",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"41","trae-inspector-end-column":"106","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",children:[t.jsx("span",{"trae-inspector-start-line":"41","trae-inspector-start-column":"11","trae-inspector-end-line":"41","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22ABORTED%3A%22%2C%22textStartLine%22%3A%2241%22%2C%22textStartColumn%22%3A%2253%22%2C%22textEndLine%22%3A%2241%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"font-bold text-gray-900",children:"ABORTED:"})," 任意阶段致命错误或超时终止，由 session_abort 触发。"]})]}),t.jsxs("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"6","trae-inspector-end-line":"46","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700",children:[t.jsx("p",{"trae-inspector-start-line":"44","trae-inspector-start-column":"8","trae-inspector-end-line":"44","trae-inspector-end-column":"47","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%B3%A8%E6%84%8F%22%2C%22textStartLine%22%3A%2244%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%2244%22%2C%22textEndColumn%22%3A%2243%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-sm font-bold",children:"注意"}),t.jsx("p",{"trae-inspector-start-line":"45","trae-inspector-start-column":"8","trae-inspector-end-line":"45","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\StateMachine.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%8A%B6%E6%80%81%E6%8E%A8%E8%BF%9B%E4%BB%85%E7%94%B1%20MQTT%20%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF%E8%A7%A6%E5%8F%91%EF%BC%9BUDP%20%E6%95%B0%E6%8D%AE%E9%9D%A2%E4%B8%8D%E7%9B%B4%E6%8E%A5%E6%94%B9%E5%8F%98%E4%BC%9A%E8%AF%9D%E7%8A%B6%E6%80%81%E3%80%82%22%2C%22textStartLine%22%3A%2245%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%2245%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-sm",children:"状态推进仅由 MQTT 控制消息触发；UDP 数据面不直接改变会话状态。"})]})]}),m=[{title:"控制面与数据面解耦",description:"通过物理分离控制信令与数据传输，使得控制逻辑更加清晰，数据传输更加高效。",icon:i},{title:"Server 端为最终一致性来源",description:"Server (PC) 拥有最终裁决权，避免了复杂的分布式一致性问题。",icon:a},{title:"Client 主动拉取 (Pull Model)",description:"无论是上传还是下载，均由 Client 发起控制和连接，适应 NAT 环境，保障安全。",icon:i},{title:"失败优先设计 (Failure-first)",description:"假设网络总是不可靠的，协议内置了强大的重传和恢复机制。",icon:p},{title:"局域网优先",description:"不强制公网穿透，专注于家庭局域网内的高性能传输，保护用户隐私。",icon:l}],E=()=>t.jsxs("div",{"trae-inspector-start-line":"34","trae-inspector-start-column":"4","trae-inspector-end-line":"51","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"mt-16",children:[t.jsx("h2",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"35","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%22%2C%22textStartLine%22%3A%2235%22%2C%22textStartColumn%22%3A%2272%22%2C%22textEndLine%22%3A%2235%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"设计原则"}),t.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"6","trae-inspector-end-line":"50","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:m.map(e=>t.jsxs("div",{"trae-inspector-start-line":"38","trae-inspector-start-column":"10","trae-inspector-end-line":"48","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-white p-6 rounded-xl border border-gray-200 hover:shadow-md transition-shadow",children:[t.jsxs("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"12","trae-inspector-end-line":"44","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"flex items-center mb-4",children:[t.jsx("div",{"trae-inspector-start-line":"40","trae-inspector-start-column":"14","trae-inspector-end-line":"42","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"p-2 bg-secondary-100 rounded-lg text-secondary-600 mr-4",children:t.jsx(e.icon,{className:"w-6 h-6"})}),t.jsx("h3",{"trae-inspector-start-line":"43","trae-inspector-start-column":"14","trae-inspector-end-line":"43","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-xl font-semibold text-gray-900",children:e.title})]}),t.jsx("p",{"trae-inspector-start-line":"45","trae-inspector-start-column":"12","trae-inspector-end-line":"47","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\architecture\\\\DesignPrinciples.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-gray-600 leading-relaxed",children:e.description})]},e.title))})]}),D=()=>t.jsx("div",{"trae-inspector-start-line":"9","trae-inspector-start-column":"4","trae-inspector-end-line":"31","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\ArchitecturePage.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"bg-gray-50 min-h-screen py-16",children:t.jsxs("div",{"trae-inspector-start-line":"10","trae-inspector-start-column":"6","trae-inspector-end-line":"30","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\ArchitecturePage.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[t.jsx("h1",{"trae-inspector-start-line":"17","trae-inspector-start-column":"10","trae-inspector-end-line":"19","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\ArchitecturePage.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%8D%8F%E8%AE%AE%E6%9E%B6%E6%9E%84%22%2C%22textStartLine%22%3A%2217%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2219%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"text-4xl font-extrabold text-gray-900 sm:text-5xl",children:"协议架构"}),t.jsx("p",{"trae-inspector-start-line":"20","trae-inspector-start-column":"10","trae-inspector-end-line":"22","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\ArchitecturePage.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%20JIAYI-FSP%20%E7%9A%84%E5%86%85%E9%83%A8%E6%9E%84%E9%80%A0%EF%BC%8C%E6%8E%A2%E7%B4%A2%20MQTT%20%E4%B8%8E%20UDP%20%E5%A6%82%E4%BD%95%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C%E3%80%82%22%2C%22textStartLine%22%3A%2220%22%2C%22textStartColumn%22%3A%2270%22%2C%22textEndLine%22%3A%2222%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"mt-4 text-xl text-gray-500 max-w-2xl mx-auto",children:"深入了解 JIAYI-FSP 的内部构造，探索 MQTT 与 UDP 如何协同工作。"})]}),t.jsxs("div",{"trae-inspector-start-line":"25","trae-inspector-start-column":"8","trae-inspector-end-line":"29","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\ArchitecturePage.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5Cwork%5C%5Cmi7%5C%5Cjiayi-fsp%5C%5Csite%22%7D",className:"max-w-4xl mx-auto",children:[t.jsx(d,{}),t.jsx(E,{}),t.jsx(A,{})]})]})});export{D as default};
