# 01 架构（Architecture）

## 分层架构

应用层 → 控制层（MQTT） → 数据层（UDP/TCP） → 网络层（LAN）。

## 各层职责

### 控制面

- 会话建立/协商
- 缺失统计与重传
- UDP 可用性探测
- 完成与终止

### 数据面

- Chunk 传输
- CRC32 校验
- 随机写盘与位图

## 原则

- 状态机仅由控制面推进
- 数据面不得改变会话状态
- Server 为最终裁决者
